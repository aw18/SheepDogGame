<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Sheep Dog Game</title>
        <style>
            * { padding: 0; margin: 0; }
            canvas { background: #eee; display: block; margin: 0 auto; }
        </style>
        <!-- <script defer src="src/main.js" charset="utf-8"></script> -->
    </head>
    <body style="background-color:powderblue;">
        <h1>Sheep Dog Game</h1>
        <img id="arrow" width="100" height="100" src="assets/straight-arrow-transparent.png">
        <canvas id="boidSimulation" width="700" height="500">
        </canvas>
        <div id="counter" style="background-color:blueviolet">
            <p style="font-size:50px;">Counter: <b id="count"></b></p>
        </div>

        <script>
            // var canvas = document.getElementById("boidSimulation");
            // var ctx = canvas.getContext("2d");
            // var x = canvas.width/2;
            // var y = canvas.height - 30;

            // var dx = 2;
            // var dy = -2;

            // function drawBall(){
            //     ctx.beginPath();
            //     ctx.arc(x, y, 10, 0, Math.PI*2);
            //     ctx.fillStyle = "#0095DD";
            //     ctx.fill();
            //     ctx.closePath();
            // }

            // function draw(){
            //     ctx.clearRect(0, 0, canvas.width, canvas.height);
            //     drawBall();
            //     x += dx;
            //     y += dy;
            // }

            var sheeps = [];
            var canvas = document.getElementById("boidSimulation");
            var ctx = canvas.getContext("2d");
            var counter = 0;

            /*
            TODO need to add vector operations
            */
            class Vector{
                constructor(originx, originy, vComp, hComp){
                    this.originx = originx;
                    this.originy = originy;
                    this.vComp = vComp;
                    this.hComp = hComp;
                }
            }

            /*
            A Boid - the boids are self organizing. Following the 3 rules:
            1. separation 
            2. alignment
            3. cohesion
            */
            class Sheep {

                // constructor
                constructor(id, xpos, ypos, radiusOfInfluence, width, height){
                    this.id = id;
                    this.xpos = xpos;
                    this.ypos = ypos;
                    this.radiusOfInfluence = radiusOfInfluence;
                    this.direction = new Vector(xpos, ypos, 0, 1);
                    this.image = new Image(width, height);
                    this.image.src = 'assets/straight-arrow-transparent.png';
                }

                //  Getter 
                get radius(){
                    return this.radiusOfInfluence;
                }

                // Method
                draw(){
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    //var img = document.getElementById("arrow");
                    ctx.drawImage(this.image, this.xpos, this.ypos, this.image.width, this.image.height);
                    console.log("x: " + this.xpos + " y:" + this.ypos);
                    this.xpos += 2;
                    this.ypos += 2;
                    console.log("after x: " + this.xpos + " y:" + this.ypos);
                }

                // method: rotate image
            }

            var sheep = new Sheep(1, 0, 0, 10, 50, 50);

            function main(){
                var count = document.getElementById("count");
                sheep.draw();
                count.innerText = counter;
                counter++;
            }

            // every 10 milliseconds forever
            setInterval(main, 50);
        </script>
    </body>
</html>
</html>